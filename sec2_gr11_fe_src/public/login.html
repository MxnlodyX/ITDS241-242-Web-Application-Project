<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PUMA-SHOP</title>
    <link rel="stylesheet" href="styles/Header_Footer.css" />
    <link rel="stylesheet" href="styles/Banner_pages.css" />
    <link rel="stylesheet" href="styles/login.css" />
    <!----Slick Library----->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="scripts/slick-1.8.1/slick/slick.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="scripts/slick-1.8.1/slick/slick-theme.css"
    />
    <!----Icon Library----->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style></style>
  </head>
  <body>
    <header>
      <div class="logo">
        <a name="logo" href="/homepage"
          ><img src="Assets/Logo/Logo.png" alt=""
        /></a>
      </div>
      <div class="shipping-text">
        <p style="font-size: 14.5px">Deliver to</p>
        <p>THAILAND</p>
      </div>
      <div class="search">
        <input
          class="search-box"
          type="text"
          placeholder="Searching for Something that you interesting !!"
        />
        <a href="/Advance_search">
          <button class="search-btn"><i class="fas fa-search"></i></button>
        </a>
      </div>

      <div class="login">
        <a href="/Our_store" style="text-align: center">Find Our Stores</a>
        <a href="/login" style="text-align: center">Login</a>
      </div>
    </header>

    <nav>
      <ul>
        <li>
          <a href="/homepage">Home</a>
        </li>
        <li class="">
          <a href="/products">Product</a>
        </li>
        <li class="">
          <a href="/products?Product_type=Shirt">Shirt</a>
        </li>
        <li class="">
          <a href="/products?Product_type=Sneaker">Sneaker</a>
        </li>
        <li class="">
          <a href="/products?Product_type=Hat">Hat</a>
        </li>
        <li class="">
          <a href="/products?Product_type=Running">Running</a>
        </li>
        <li class="">
          <a href="/products?Product_type=Football">Football</a>
        </li>
        <li class="">
          <a href="/about_us">About us</a>
        </li>
        <li class="Shopping-Cart">
          <i class="fa fa-shopping-cart" style="font-size: 20px"></i> CART
          <div class="order-details">
            <div class="arrow-up"></div>
            <p class="Lasted">Lasted Product</p>
            <div class="Product-Cart">
              <div class="Product-img">
                <img
                  src="./Assets/Product/รองเท้าผ้าใบ-Rebound-V6-Lo-Youth.avif"
                  alt=""
                />
              </div>
              <div class="Product-name">
                <p>Rebound V6 Lo Youth</p>
              </div>
              <div class="Product-Price">
                <p name="price">฿3200</p>
              </div>
            </div>
            <div class="Product-Cart">
              <div class="Product-img">
                <img
                  src="/Assets/Product/รองเท้าผ้าใบ-Rebound-V6-Lo-Youth.avif"
                  alt=""
                />
              </div>
              <div class="Product-name">
                <p>Hood PUMA FIT Move</p>
              </div>
              <div class="Product-Price">
                <p name="price">฿2500</p>
              </div>
            </div>
            <div class="Product-Cart">
              <div class="Product-img">
                <img
                  src="/Assets/Product/รองเท้าผ้าใบ-Rebound-V6-Lo-Youth.avif"
                  alt=""
                />
              </div>
              <div class="Product-name">
                <p>PUMA LOVELY PUMA</p>
              </div>
              <div class="Product-Price">
                <p name="price">฿1900</p>
              </div>
            </div>
            <button>SEE MORE ITEMS</button>
          </div>
        </li>
      </ul>
    </nav>
    <form id="LoginForm" method="POST">
          <div class="box">
            <div class="wrapper">
              <h1>Login</h1>
              <div class="input-box">
                <label>Username</label>
                <input name="adminUsername" id="adminUsername" type="text" placeholder="Username" required />
              </div>
              <div class="input-box">
                <label>Password</label>
                <input name="adminPassword" id="adminPassword" type="password" placeholder="Password" required />
              </div>
              <div class="login-btn">
                <button class="btn">Login</button>
              </div>
              <div class="register-link">
                <p>
                  Don't have an account?
                  <a href="/register">Register</a>
                </p>
              </div>
            </div>
          </div>
    </form>

        </div>
      </div>
    <footer>
      <h2>© Copyright by Group 11 Section 2</h2>
      <h3><a href="/about_us">Contact Our team Click here</a></h3>
    </footer>
    <script>

    async function adminLogin(url,username,password,token=""){
        let response = await fetch(url,{
          method: "POST",
          headers:{
            'Accept':'application/json',
            'Content-Type': 'application/json',
            'Authorization':'Bearer' + token
          },body: JSON.stringify({
            adminUsername : username,
            adminPassword : password,
          }),
        });
        const data = await response.json();
        if(response.ok){
          console.log("Login successful:", data);
          localStorage.setItem("token", data.token);
          localStorage.setItem("username", data.adminData.username);
          localStorage.setItem("position", data.adminData.position);
          localStorage.setItem("first_name", data.adminData.f_name);
          localStorage.setItem("last_name", data.adminData.l_name);


          localStorage.setItem("profileImage", data.adminData.profile_image);
          alert("Login Successfully");
          window.location.href = "/AdminSide/Dashboard";
        }else{
          alert("Login Failed or Invalid username & password")
        }
       
    }

        document.getElementById("LoginForm").addEventListener("submit", (event) => {
            event.preventDefault();

            const username = document.getElementById("adminUsername").value;
            const password = document.getElementById("adminPassword").value;

            console.log("Submitting Login Form");
            adminLogin("http://localhost:5001/api_service/adminLogin", username, password);
        });

      
  </script>
  </body>
</html>
